<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>WebsocketTest</title>

    <script src="signalr.min.js"></script>


</head>
<body>


 <button id="sendWebsocket" class="pass">发送HelloWebSocket</button>
 <script type="text/javascript">
     var connection = new signalR.HubConnectionBuilder().withUrl("/sparkMovie").build();

     connection.on("ReceiveMessage", function (user, message) {
         alert(message);
     });

     connection.start().then(function(){
        alert("Send Test");
     }).catch(function (err) {
         return console.error(err.toString());
     });

     document.getElementById("sendWebsocket").addEventListener("click", function (event) {
         var user = "whatUser";
         var message = "HelloWebsocket";
         connection.invoke("SendMessage", user, message).catch(function (err) {
             return console.error(err.toString());
         });
         event.preventDefault();
     });

 </script>
</body>
</html>
